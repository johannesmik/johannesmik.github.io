<!DOCTYPE html>
<html lang="en">
<head>
				<meta charset="utf-8">
				<meta name="viewport" content="width:device-width, initial-scale=1.0">
				<title>My Pelican Workflow</title>
        <link rel="stylesheet" href="./theme/css/main.css">
      

</head>

<body id="index" class="home">
	<header class="mainheader">
	  <h1><a href="./index.html">johannes' blog </a></h1>
		<nav>
			<ul>
					<li><a href="./pages/about.html">About me</a></li>
					<li ><a href="./category/personal.html">Personal</a></li>
					<li class="active"><a href="./category/technical.html">Technical</a></li>
		</nav>
	</header>
	<div class="content">
<article>
    <header>
      <h2>
        <a href="./pelican-workflow.html" rel="bookmark"
           title="Permalink to My Pelican Workflow">My Pelican Workflow</a></h2>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr title="2014-05-16T00:00:00">
                Fri 16 May 2014
        </abbr>
                by <a class="url fn" href="./author/johannes-mikulasch.html">Johannes Mikulasch</a> 
		in category <a href="./category/technical.html">Technical</a>.
<p>tags: <a href="./tag/pelican.html">#pelican</a>&nbsp;<a href="./tag/workflow.html">#workflow</a>&nbsp;</p>
</footer><!-- /.post-info -->      <p>This is based on an article of <a class="reference external" href="http://blog.xlarrakoetxea.org/posts/2012/10/creating-a-blog-with-pelican/">SloksBlog</a> and the <a class="reference external" href="http://docs.getpelican.com/en/3.3.0/tips.html">PelicanDoku</a>. I rewrote it so I still know what I have done, even if his page should go down.</p>
<div class="section" id="installation">
<h2>Installation</h2>
<p>First, I installed virtualenv, and virtualenvwrapper (simplifies the use of virtualenv, for example includes a set of bash functions).:</p>
<pre class="literal-block">
$ pip install virtualenv
$ pip install virtualenvwrapper
</pre>
<p><em>(Actually, you can also only install the latter, as it has a dependency on the former)</em></p>
<p>Then I added this to my <tt class="docutils literal">.bashrc</tt> to configure virtualenvwrapper:</p>
<pre class="literal-block">
# Virtual Environments Wrapper
export WORKON_HOME=~/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh
</pre>
<p>Next, I created a new virtualenv:</p>
<pre class="literal-block">
$ mkvirtualenv blog
</pre>
<p>I now can use those two commands to start and end working on my blog:</p>
<pre class="literal-block">
$ workon blog
$ deactivate
</pre>
<p>I added this to <tt class="docutils literal"><span class="pre">~/.virtualenvs/postactivate</span></tt> script. That takes me to the right folder after <tt class="docutils literal">workon blog</tt>.:</p>
<pre class="literal-block">
if [ "$(basename $VIRTUAL_ENV)" == "blog" ]; then
    cd ~/workspace/blog
fi
</pre>
<p>The advantage is that I can (pip) install and update all the python packages I want without messing up my other projects.:</p>
<pre class="literal-block">
$ pip install pelican
$ pip install ghp-import
</pre>
<p>Some other packages I needed.</p>
<p>For the 'better_figures_and_images' plugin:</p>
<blockquote>
$ pip install pillow beautifulsoup4</blockquote>
</div>
<div class="section" id="new-git-workflow">
<h2>New Git Workflow</h2>
<p>Because the ghpages was somehow putting files in the blog directory I changed the workflow a little bit.</p>
<p>I initialised a new git repo in the output directory, so changes get pushed like this:</p>
<pre class="literal-block">
$ cd output
$ git commit -a
$ git push
$ (git push --force)
</pre>
</div>
<div class="section" id="old-git-workflow">
<h2>Old Git Workflow</h2>
<p>Using git userpages, I set up a new git repository called <tt class="docutils literal">username.github.io</tt>. Then I created a new git repo in my blog directory and set it up:</p>
<pre class="literal-block">
$ cd workspace/blog
$ git init
$ git remote add origin git@github.com:username/username.github.io.git
</pre>
<p>Then I can use the following commands to build and publish my page:</p>
<pre class="literal-block">
$ pelican content -o output -s pelicanconf.py
$ ghp-import output -m "Commit message"
$ git push origin gh-pages:master
</pre>
<p>The ghp-import command commits the output directory to a local branch called <tt class="docutils literal"><span class="pre">gh-pages</span></tt>.</p>
<p>The push command pushes the local <tt class="docutils literal"><span class="pre">gh-pages</span></tt> branch (created by gh-import) to the <tt class="docutils literal">master</tt> branch of my github repo.</p>
<p>Thats it.</p>
</div>
<script type= "text/javascript">
    if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
        var mathjaxscript = document.createElement('script');
        mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
        mathjaxscript.type = 'text/javascript';
        mathjaxscript.src = 'https:' == document.location.protocol
                ? 'https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'
                : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
        mathjaxscript[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" +
            "    config: ['MMLorHTML.js']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    displayAlign: 'center'," +
            "    displayIndent: '0em'," +
            "    showMathMenu: true," +
            "    tex2jax: { " +
            "        inlineMath: [ ['$','$'] ], " +
            "        displayMath: [ ['$$','$$'] ]," +
            "        processEscapes: true," +
            "        preview: 'TeX'," +
            "    }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
    }
</script>

    </div><!-- /.entry-content -->
</article>
	</div>


	<footer class="mainfooter">
		<p><small>&copy; 2013 - 2015, Johannes Mikulasch. Powered by <a href="http://www.python.org">Python</a> and <a href="http://blog.getpelican.com/">Pelican</a></small></p>
	</footer>
</body>
</html>